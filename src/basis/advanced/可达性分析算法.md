---
title: 可达性分析算法
date: 2024-03-25 22:02:09
category:
  - 知识进阶
tag:
  - archive
---
可达性分析算法通过一系列成为GCRoots的对象作为起始点，从这些节点上向下搜索，所走过的路径称为引用链，当一个对象没有任何引用链与GCRoots连接时就说明此对象不可用，也就是对象不可达

GCRoots对象
1、虚拟机栈中引用对象（栈帧中本地变量表）
2、方法中类的静态属性引用对象
3、方法区中常量引用对象
4、native方法引用的对象

可达性分析算法整个清理流程
1、第一次标记：对象经过可达性分析，没有GCRoots引用链,则进行第一次标记筛选，筛选条件是：该对象是否必要执行finalize()方法：没有覆盖finalize方法或该方法已经执行过。如果有必要执行，则该对象放在F-Queue队列，并稍后在由虚拟 机建立的低优先级 Finalizer 线程中触发该对象的 finalize()方法，但不保证一定等 待它执行结束。
2、第二次标记:GC 对 F-Queue 队列里的对象进行第二次标记，如果在第二次标记 时该对象又成功被引用，则会被移除即将回收的集合，否则会被回收

注意：任何一个对象finalize方法只会被系统调用一次
