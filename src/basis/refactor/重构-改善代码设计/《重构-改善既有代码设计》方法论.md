---
title: 《重构-改善既有代码设计》方法论
date: 2024-03-24 11:47:50
category:
  - 重构-改善代码设计
tag:
  - archive
---
# 重构方法论
####引言
1、程序可持续特点有四个特点：
1）代码清晰，容易阅读
2）所有逻辑都只在唯一地点指定，即无重复代码
3）新的改动不会危及现有行为，即开闭原则
4）尽可能简单表达条件逻辑

2、如何重构让代码可持续化
[重构实战](https://www.jianshu.com/p/e8c9649ae347)

####GOF点评
设计模式为重构提供目标，以重构方式改进软件质量

####1、定义
**不改变软件可观察行为**的前提下，改善其内部结构
2种含义：
1、保持代码功能不变，既不多，也不少
2、重构**不需要了解软件行为**，调整软件内部结构

####2、方法论
1）原则：**无重复代码**，单一职责，测试驱动
2）目标：**设计模式**为重构提供目标
3）时机：添加功能，修补错误，复审代码
4）切入点：**”坏味道“代码与对应手法**
5）记录：**重构修改清单**
6）弊端：重构会引入中间层
7）优化：找出真正问题，遵循二八原则

方法论对应实战
[重构实战](https://www.jianshu.com/p/e8c9649ae347)

####重构原则
```
事不过三，三则重构
```
第一次做某件事时只管去做，第二次做类似事会产生反感，但无论如何还是可以去做，第三次做类似的事，你就应该重构。
一句话解释：无重复代码
```
单一职责原则
```
就一个类而言，应该仅有一个引起它变化的原因
关键：一个类，只做一件事
```
最少知道原则
```
一个对象应该对其他对象有最少了解
一句话理解：访问对象，又要减少耦合

```
TDD --测试驱动开发
```
用单元测试保证观察行为一致

```
二八原则
```
先分析真正问题，在根据实际情况，考虑重构。优化遵循二八原则

####记录重构清单
1）命名，建造重构词汇表，统一名称规范
2）重构手法与情景映射，关联
3）重构原因：为什么（why）
4）重构和修改功能是两件事，一件事做完，再处理另一件事

####何时停止是重构的压轴
摘自《重构 改善既有代码设计》

这些技术如此精彩，可他们却仅仅是个开始，这是为什么？答案很简单：因为你还不知道何时应该使用它们。何时不该使用它们；何时开始，何时停止；何时前进、何时等待。使重构能够成功的，不是前面各自独立的技术，而是这种节奏。
```
得道标志是：你可以自信停止重构。
```
在重构者的整场表演中，“停止”正式压轴大戏
在悬崖峭壁上的小径行走；只要有光，你就可以前进，虽然谨慎却仍然自信。但是，一旦太阳下山，你就应该停止前进；夜晚你就应该睡觉，并且相信明天早晨太阳仍然升起。
