---
title: 重构实战
date: 2024-03-24 11:47:50
category:
  - 重构-改善代码设计
tag:
  - archive
---
#####重构实战：
1、本文把常用坏味道，重构手法列出，用于解决工作日常80%问题
2、降低重构带来的开销
[影响项目重构现实因素及解决方案](https://www.jianshu.com/p/3327d42ca1c0)

#####1、原则
1、无重复代码
2、单一职责
3、测试驱动

#####2、重构的时机
1、添加功能，
2、修补错误(bug)，
3、复审代码

#####3、"坏味道"的代码
1、重复代码
2、过长函数
3、过大的类（class）
4、过长参数列表
5、一个类需多处修改
6、一个变化多个类修改
7、一个函数过多依赖其他类
8、一团功能相似变量
9、switch 代码段
10、平行继承
11、冗余类，删除
12、过度设计、值得才设计
13、临时字段多
14、函数链过长
15、委托（类）函数过度
16、两个类关系过于紧密，用代理解决
17、相同功能函数
18、类库复用即可，不必完美
19、采用EntityClass
20、被拒绝的遗赠
21、过多注释，代码是最好的注释！

#####4、常用重构手法
1、提取子函数
2、上移函数到父类
3、下移函数到子类
4、封装固定调用逻辑
5、使用泛型去除重复逻辑
6、使用对象避免过多参数
7、转移函数--单一职责
8、将类型码转为状态模式
9、NullObject模式
10、分解胖型类

**详见**
1、[重新组织函数](https://www.jianshu.com/p/ac755f20f080)
2、[在对象之间搬移特性](https://www.jianshu.com/p/041c7fdef067)
3、[重新组织数据](https://www.jianshu.com/p/18a78b08bf3c)
4、[简化条件表达式](https://www.jianshu.com/p/3e58c6f79364)
5、[处理继承关系](https://www.jianshu.com/p/a1fe76808aae)
6、[大型重构](https://www.jianshu.com/p/a86972c48c8f)

#####5、重构修改清单
1）记录命名，建造重构词汇表，统一名称规范
2）记录重构手法与情景映射，关联
3）记录重构原因：为什么（why）
4）记录修改清单
5）重构和修改功能是两件事，一件事做完，再处理另一件事
